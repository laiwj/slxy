webpackJsonp([2,13],{35:function(o,n,t){var i,e;(function(t){i=[],e=function(){var o,n=avalon.define({$id:"login",isSumbit:!1,account:"",password:null,validation:{onInit:function(n){o=n},onReset:function(o,n){t(".alert-login").text("").hide()},onError:function(o){var n=o[0].message;t(".alert-login").text(n).show(),t("#J_login").attr("disabled",!0)},onSuccess:function(){t("#J_login").attr("disabled",!1)}},initEditData:function(){var o=n.getPassFromCookie();if(o){var i=o.split("|");n.account=i[0],n.password=i[1],i[1]&&t(".J_password_remember").attr("checked","checked")}},initDomListener:function(){t(document).on("keydown",function(o){13==o.keyCode&&t("#J_login").click()})},loginFun:function(){if(!n.isSumbit){t("#login_password").val();t("#J_login").text("正在登录...");var o={account:n.account,password:n.password},i="http://10.101.1.171:10110/user/login";n.isSumbit=!0,t.post(i,o,function(o){if(n.isSumbit=!1,t("#J_login").text("登录"),0!==o.code)return t(".alert-login").text(o.msg).show(),setTimeout(function(){t(".alert-login").hide()},1e3),!1;var i=o.data._id+"|"+o.data.type+"|"+o.data.short_id+"|"+o.data.username;window.$.cookie(location.host+"_userinfo",i,{expires:365});var e=o.data.username+"|"+o.data.password;document.getElementById("J_password_remember").checked?n.savePassToCookie(e):n.clearPassToCookie(),window.$.cookie(location.host+"_userInfoResult",""),window.location.href="/#!/report"})}},savePassToCookie:function(o){window.$.cookie(location.host+"_password",o,{expires:365})},getPassFromCookie:function(){return window.$.cookie(location.host+"_password")},clearPassToCookie:function(){window.$.cookie(location.host+"_password","",{path:"/"})}});return avalon.controller(function(o){o.$onRendered=function(){document.title="登录",n.initEditData(),n.initDomListener()},o.$onEnter=function(o,n,t){},o.$onBeforeUnload=function(){},o.$vmodels=[n]})}.apply(n,i),!(void 0!==e&&(o.exports=e))}).call(n,t(33))}});